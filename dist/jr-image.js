!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.jrImage=e():t.jrImage=e()}(this,function(){return function(t){function e(a){if(r[a])return r[a].exports;var n=r[a]={i:a,l:!1,exports:{}};return t[a].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,a){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:a})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,r){"use strict";t.exports=r(1)},function(t,e,r){"use strict";var a=r(2);t.exports=function(){var t={};return t.gray=function(t){if(t&&t.src){var e=t.width,r=t.height;if(!e||!r)return!1;var n=document.createElement("canvas");n.width=e,n.height=r;var o=n.getContext("2d");o.drawImage(t,0,0);var i=o.getImageData(0,0,e,r);return o.clearRect(0,0,e,r),i=a.gray(i),o.putImageData(i,0,0),(new Image).src=n.toDataURL("image/png",1)}},t.blackAndWhite=function(t,e){if(t&&t.src){var r=t.width,n=t.height;if(!r||!n)return!1;var o=document.createElement("canvas");o.width=r,o.height=n;var i=o.getContext("2d");i.drawImage(t,0,0);var c=i.getImageData(0,0,r,n);return i.clearRect(0,0,r,n),c=a.blackAndWhite(c,e),i.putImageData(c,0,0),(new Image).src=o.toDataURL("image/png",1)}},t.reverse=function(t){if(t&&t.src){var e=t.width,r=t.height;if(!e||!r)return!1;var n=document.createElement("canvas");n.width=e,n.height=r;var o=n.getContext("2d");o.drawImage(t,0,0);var i=o.getImageData(0,0,e,r);return o.clearRect(0,0,e,r),i=a.reverse(i),o.putImageData(i,0,0),(new Image).src=n.toDataURL("image/png",1)}},t.rgba=function(t,e){if(t&&t.src){var r=t.width,n=t.height;if(!r||!n)return!1;var o=document.createElement("canvas");o.width=r,o.height=n;var i=o.getContext("2d");i.drawImage(t,0,0);var c=i.getImageData(0,0,r,n);return i.clearRect(0,0,r,n),c=a.rgba(c,e),i.putImageData(c,0,0),(new Image).src=o.toDataURL("image/png",1)}},t.mosaic=function(t,e){if(t&&t.src){var r=t.width,n=t.height;if(!r||!n)return!1;var o=document.createElement("canvas");o.width=r,o.height=n;var i=o.getContext("2d");i.drawImage(t,0,0);var c=i.getImageData(0,0,r,n);return i.clearRect(0,0,r,n),c=a.mosaic(c,e),i.putImageData(c,0,0),(new Image).src=o.toDataURL("image/png",1)}},t.oils=function(t,e){if(t&&t.src){var r=t.width,n=t.height;if(!r||!n)return!1;var o=document.createElement("canvas");o.width=r,o.height=n;var i=o.getContext("2d");i.drawImage(t,0,0);var c=i.getImageData(0,0,r,n);return i.clearRect(0,0,r,n),c=a.oils(c,e),i.putImageData(c,0,0),(new Image).src=o.toDataURL("image/png",1)}},t.gaussBlur=function(t,e,r){if(t&&t.src){var n=t.width,o=t.height;if(!n||!o)return!1;var i=document.createElement("canvas");i.width=n,i.height=o;var c=i.getContext("2d");c.drawImage(t,0,0);var g=c.getImageData(0,0,n,o);return c.clearRect(0,0,n,o),g=a.gaussBlur(g,e,r),c.putImageData(g,0,0),(new Image).src=i.toDataURL("image/png",1)}},t}()},function(t,e,r){"use strict";r(3),t.exports=function(){var t={};return t.gray=function(t){for(var e=t.data,r=0;r<e.length;r+=4){var a=(e[r+0]+e[r+1]+e[r+2])/3;e[r+0]=e[r+1]=e[r+2]=a}return t},t.blackAndWhite=function(t,e){var r=t.data;(void 0===e||e<0||e>255)&&(e=128);for(var a=0;a<r.length;a+=4){var n=r[a+0]+r[a+1]+r[a+2],o=n>e?255:0;r[a+0]=r[a+1]=r[a+2]=o}return t},t.reverse=function(t){for(var e=t.data,r=0;r<e.length;r+=4)e[r+0]=255-e[r+0],e[r+1]=255-e[r+1],e[r+2]=255-e[r+2],e[r+3]=e[r+3];return t},t.rgba=function(t,e){e=Object.assign({r:-1,g:-1,b:-1,a:-1},e);for(var r=t.data,a=0;a<r.length;a+=4)r[a+0]=e.r<0||e>255?r[a+0]:e.r,r[a+1]=e.g<0||e>255?r[a+1]:e.g,r[a+2]=e.b<0||e>255?r[a+2]:e.b,r[a+3]=e.a<0||e>255?r[a+3]:e.a;return t},t.mosaic=function(t,e){var r=t.data,a=t.width,n=t.height,o=parseInt(e)||5;o=2*o+1;for(var i=0;i<Math.floor(a/o);i++)for(var c=0;c<Math.floor(n/o);c++){for(var g=[],u=[0,0,0],f=0;f<o;f++)for(var v=0;v<o;v++){var s=(c*o+f)*a+i*o+v;u[0]+=r[4*s],u[1]+=r[4*s+1],u[2]+=r[4*s+1]}g[0]=u[0]/(o*o),g[1]=u[1]/(o*o),g[2]=u[2]/(o*o);for(var h=0;h<o;h++)for(var d=0;d<o;d++){var s=(c*o+h)*a+i*o+d;r[4*s+0]=g[0],r[4*s+1]=g[1],r[4*s+2]=g[2]}}return t},t.oils=function(t,e){var r=t.data;e=parseInt(e)||28;for(var a=0;a<r.length;a+=4)r[a+0]=Math.floor(r[a+0]/e)*e,r[a+1]=Math.floor(r[a+1]/e)*e,r[a+2]=Math.floor(r[a+2]/e)*e;return t},t.gaussBlur=function(t,e,r){var a,n,o,i,c,g,u,f,v,s,h=t.data,d=t.width,m=t.height,l=[],p=0;for(e=Math.floor(e)||3,r=r||e/3,g=1/(Math.sqrt(2*Math.PI)*r),c=-1/(2*r*r),u=0,a=-e;a<=e;a++,u++)i=g*Math.exp(c*a*a),l[u]=i,p+=i;for(u=0,s=l.length;u<s;u++)l[u]/=p;for(n=0;n<m;n++)for(a=0;a<d;a++){for(o=i=c=g=0,p=0,f=-e;f<=e;f++)(v=a+f)>=0&&v<d&&(u=4*(n*d+v),o+=h[u]*l[f+e],i+=h[u+1]*l[f+e],c+=h[u+2]*l[f+e],p+=l[f+e]);u=4*(n*d+a),h[u]=o/p,h[u+1]=i/p,h[u+2]=c/p}for(a=0;a<d;a++)for(n=0;n<m;n++){for(o=i=c=g=0,p=0,f=-e;f<=e;f++)(v=n+f)>=0&&v<m&&(u=4*(v*d+a),o+=h[u]*l[f+e],i+=h[u+1]*l[f+e],c+=h[u+2]*l[f+e],p+=l[f+e]);u=4*(n*d+a),h[u]=o/p,h[u+1]=i/p,h[u+2]=c/p}return t},t}()},function(t,e,r){"use strict";!function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert first argument to object");for(var e=Object(t),r=1;r<arguments.length;r++){var a=arguments[r];if(void 0!==a&&null!==a){a=Object(a);for(var n=Object.keys(Object(a)),o=0,i=n.length;o<i;o++){var c=n[o],g=Object.getOwnPropertyDescriptor(a,c);void 0!==g&&g.enumerable&&(e[c]=a[c])}}}return e}})}()}])});